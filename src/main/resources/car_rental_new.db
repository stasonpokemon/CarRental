DROP DATABASE car_rental_new;
CREATE DATABASE car_rental_new;
use car_rental_new;

CREATE TABLE cars
(
    id    INT PRIMARY KEY,
    name  VARCHAR(50),
    state VARCHAR(50)
);

};

CREATE TABLE clients
(
    id      INT PRIMARY KEY,
    name    VARCHAR(50),
    address VARCHAR(50)
);

CREATE TABLE refunds
(
    id     INT PRIMARY KEY,
    state  VARCHAR(50),
    detail VARCHAR(50),
    price  DOUBLE
);

CREATE TABLE orders
(
    id        INT PRIMARY KEY,
    price     DOUBLE,
    state     VARCHAR(50),
    date      datetime,
    time      INT NOT NULL,
    car_id    INT NOT NULL,
    client_id INT NOT NULL,
    refund_id INT,
    FOREIGN KEY (client_id) REFERENCES clients (id),
    FOREIGN KEY (car_id) REFERENCES cars (id),
    FOREIGN KEY (refund_id) REFERENCES refunds (id)
);

INSERT INTO cars (id, name, state)
VALUES (1, 'Audi RS6', 'WITHOUT_DAMAGE');
INSERT INTO cars (id, name, state)
VALUES (2, 'BMW M3', 'WITHOUT_DAMAGE');
INSERT INTO cars (id, name, state)
VALUES (3, 'Mercedes G63 AMG', 'WITHOUT_DAMAGE');
INSERT INTO cars (id, name, state)
VALUES (4, 'Audi TT RS', 'WITHOUT_DAMAGE');
INSERT INTO cars (id, name, state)
VALUES (5, 'Mercedes C63 AMG', 'WITHOUT_DAMAGE');

SELECT * FROM cars;

INSERT INTO clients (id, name, address)
VALUES (1, 'Stanislav Trebnikov', 'Vitebsk Stroitelei 22k6 86');
INSERT INTO clients (id, name, address)
VALUES (2, 'Egor Trebnikov', 'Vitebsk Stroitelei 22k6 86');
INSERT INTO clients (id, name, address)
VALUES (3, 'Anastasia Dyameshenko', 'Voinov Intrn. 34 52');

SELECT * FROM clients;

INSERT INTO orders (id, price, state, date, time, car_id, client_id)
VALUES (1, 350.0, 'DECLINED', now(),5, 1,1);

INSERT INTO orders (id, price, state, date, time, car_id, client_id)
VALUES (2, 250.0, 'APPROVED', now(),2, 2,2);

INSERT INTO orders (id, price, state, date, time, car_id, client_id)
VALUES (3, 1200.0, 'APPROVED', now(),12, 4,2);

SELECT * FROM orders;

INSERT INTO refunds (id, state, price)
VALUES (1, 'WITHOUT_DAMAGE', 0.0);

UPDATE orders SET refund_id = 1 WHERE id = 2;

SELECT * FROM orders;
SELECT * FROM cars;
SELECT * FROM clients;







